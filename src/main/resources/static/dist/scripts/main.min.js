!function(e){"use strict";e.module("kandoe",["ngRoute","ngStorage"]).config(["$httpProvider","localStorageServiceProvider",function(e,t){t.setPrefix("kandoe"),e.interceptors.push("AuthInterceptor")}]).run(["$location","$rootScope","$timeout","GebruikerService","JwtService","localStorageService",function(e,t,n,r,i,o){t.$on("$viewContentLoaded",function(){n(function(){componentHandler.upgradeAllRegistered()},0)}),t.logout=function(){o.remove("auth"),t.id=null,t.naam=null,t.rollen=null,t.loggedIn=!1,e.path("/")};var a=o.get("auth");a&&r.find(i.decodeToken(a.token).sub).then(function(e){t.id=e.id,t.naam=e.gebruikersnaam,t.rollen=e.rollen,t.loggedIn=!0})}])}(window.angular),function(e){"use strict";e.module("kandoe").constant("HEADERS",{"Content-Type":"application/json"})}(window.angular),function(e){"use strict";function t(e){e.when("/",{templateUrl:"/dist/views/home.html",controller:"HomeController",controllerAs:"vm"}).when("/auth/login",{templateUrl:"/dist/views/auth/login.html",controller:"LoginController",controllerAs:"vm"}).when("/auth/register",{templateUrl:"/dist/views/auth/register.html",controller:"RegisterController",controllerAs:"vm"}).when("/auth/profile",{templateUrl:"/dist/views/auth/profile.html",controller:"ProfileController",controllerAs:"vm"}).when("/organisaties",{templateUrl:"/dist/views/organisaties/index.html",controller:"OrganisatieIndexController",controllerAs:"vm"}).when("/cirkelsessies",{templateUrl:"/dist/views/cirkelsessies/index.html",controller:"CirkelsessieIndexController",controllerAs:"vm"}).when("/cirkelsessies/details/:id",{templateUrl:"/dist/views/cirkelsessies/details.html",controller:"CirkelsessieDetailsController",controllerAs:"vm"}).when("/deelnames",{templateUrl:"/dist/views/deelnames/index.html",controller:"DeelnameIndexController",controllerAs:"vm"}).otherwise({redirectTo:"/"})}t.$inject=["$routeProvider"],e.module("kandoe").config(t)}(window.angular),function(e){"use strict";function t(e){var t={};return t.request=function(t){t.headers=t.headers||{};var n=e.get("auth");return n&&(t.headers.Authorization="Bearer "+n.token),t},t}t.$inject=["localStorageService"],e.module("kandoe").factory("AuthInterceptor",t)}(window.angular),function(e){"use strict";function t(e){var t={};return t.login=function(t){return e.post("/auth/login",t).then(function(e){return e.data})},t.register=function(t){return e.post("/auth/register",t).then(function(e){return e.data})},t}t.$inject=["$http"],e.module("kandoe").factory("AuthService",t)}(window.angular),function(e){"use strict";function t(e){var t={};return t.createMessage=function(t,n){return e.post("/api/chats/"+t+"/messages",n).then(function(e){return e.data})},t.getChat=function(t){return e.get("/api/cirkelsessies/"+t+"/chat").then(function(e){return e.data})},t}t.$inject=["$http"],e.module("kandoe").factory("ChatService",t)}(window.angular),function(e){"use strict";function t(e){var t={};return t.all=function(){return e.get("/api/cirkelsessies").then(function(e){return e.data})},t.find=function(t){return e.get("/api/cirkelsessies/"+t).then(function(e){return e.data})},t.create=function(t){return e.post("/api/cirkelsessies",t).then(function(e){return e.data})},t.update=function(t){return e.put("/api/cirkelsessies/"+t.id,t).then(function(e){return e.data})},t["delete"]=function(t){return e["delete"]("/api/cirkelsessies/"+t).then(function(e){return e.data})},t}t.$inject=["$http"],e.module("kandoe").factory("CirkelsessieService",t)}(window.angular),function(e){"use strict";function t(e){var t={};return t.doeDeelname=function(t){return e.post("/api/deelnames/"+t).then(function(e){return e.data})},t.getDeelnames=function(t){return e.get("/api/cirkelsessies/"+t+"/deelnames").then(function(e){return e.data})},t}t.$inject=["$http"],e.module("kandoe").factory("DeelnameService",t)}(window.angular),function(e){"use strict";function t(e){var t={};return t.all=function(){return e.get("/api/gebruikers").then(function(e){return e.data})},t.create=function(t){return e.post("/api/gebruikers",t).then(function(e){return e.data})},t.find=function(t){return e.get("/api/gebruikers/"+t).then(function(e){return e.data})},t.update=function(t,n){return e.put("/api/gebruikers/"+t,n).then(function(e){return e.data})},t["delete"]=function(t){return e["delete"]("/api/gebruikers/"+t).then(function(e){return e.data})},t.getMijnDeelnames=function(){return e.get("/api/gebruikers/deelnames").then(function(e){return e.data})},t}t.$inject=["$http"],e.module("kandoe").factory("GebruikerService",t)}(window.angular),function(e){"use strict";function t(e){var t={};return t.all=function(){return e.get("/api/hoofdthemas").then(function(e){return e.data})},t.find=function(t){return e.get("/api/hoofdthemas/"+t).then(function(e){return e.data})},t.create=function(t){return e.post("/api/hoofdthemas",t).then(function(e){return e.data})},t.update=function(t){return e.put("/api/hoofdthemas/"+t.id,t).then(function(e){return e.data})},t["delete"]=function(t){return e["delete"]("/api/hoofdthemas/"+t).then(function(e){return e.data})},t}t.$inject=["$http"],e.module("kandoe").factory("HoofdthemaService",t)}(window.angular),function(e){"use strict";function t(){this.urlBase64Decode=function(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return decodeURIComponent(escape(window.atob(t)))},this.decodeToken=function(e){var t=e.split(".");if(3!==t.length)throw new Error("JWT must have 3 parts");var n=this.urlBase64Decode(t[1]);if(!n)throw new Error("Cannot decode the token");return JSON.parse(n)},this.getTokenExpirationDate=function(e){var t=this.decodeToken(e),n=new Date(0);return"undefined"==typeof t.exp?null:(n.setUTCSeconds(t.exp),n)},this.isTokenExpired=function(e,t){var n=this.getTokenExpirationDate(e);return t=t||0,null===n?!1:!(n.valueOf()>(new Date).valueOf()+1e3*t)}}e.module("kandoe").service("JwtService",t)}(window.angular),function(e){"use strict";function t(e){var t={};return t.createKaart=function(t,n){return e.post("/api/cirkelsessies/"+t+"/spelkaart",n).then(function(e){return e.data})},t.verschuifKaart=function(t){return e.post("/api/spelkaarten/"+t+"/verschuif").then(function(e){return e.data})},t}t.$inject=["$http"],e.module("kandoe").factory("KaartService",t)}(window.angular),function(e){"use strict";function t(e){var t={};return t.myOrganisaties=function(){return e.get("/api/organisaties/my").then(function(e){return e.data})},t.find=function(t){return e.get("/api/organisaties/"+t).then(function(e){return e.data})},t.create=function(t){return e.post("/api/organisaties",t).then(function(e){return e.data})},t.update=function(t){return e.put("/api/organisaties/"+t.id,t).then(function(e){return e.data})},t["delete"]=function(t){return e["delete"]("/api/organisaties/"+t).then(function(e){return e.data})},t}t.$inject=["$http"],e.module("kandoe").factory("OrganisatieService",t)}(window.angular),function(e){"use strict";function t(e){var t={};return t.getSpelkaarten=function(t){return e.get("/api/cirkelsessies/"+t+"/spelkaarten").then(function(e){return e.data})},t}t.$inject=["$http"],e.module("kandoe").factory("SpelkaartService",t)}(window.angular),function(e){"use strict";function t(e,t,n,r,i,o,a,u){var c=this;c.cirkelsessie={},c.chat={},c.chatId={},c.deelnames=[],c.cirkelsessieId={},c.spelkaarten=[],r.find(n.id).then(function(e){i.getChat(e.id).then(function(e){c.chat=e,c.chatId=e.id}),u.getSpelkaarten(e.id).then(function(e){c.spelkaarten=e}),a.getDeelnames(e.id).then(function(e){c.deelnames=e}),c.cirkelsessie=e,c.cirkelsessieId=e.id}),c.getTimes=function(e){for(var t=[],n=e;n>0;n--)t.push(n);return t},c.isDeelnemer=function(e){for(var n=0;n<e.length;n++)if(e[n].gebruiker.id==t.id)return!0;return!1},c.setCircleColor=function(e){return e%2==0?"#4985B9":"white"},c.ShowTooltip=function(e,t){var n=document.getElementById("tooltip");n.setAttribute("x",e.clientX-50),n.setAttribute("y",e.clientY-50),n.firstChild.data=t,n.setAttribute("visibility","visible")},c.HideTooltip=function(){var e=document.getElementById("tooltip");e.setAttribute("visibility","hidden")},c.createMessage=function(t,n){i.createMessage(t,n).then(function(){e.reload()})},c.createKaart=function(t,n){o.createKaart(t,n).then(function(){e.reload()})},c.verschuifKaart=function(t){o.verschuifKaart(t).then(function(){e.reload()})},c.doeDeelname=function(){a.doeDeelname(c.cirkelsessieId).then(function(){e.reload()})}}t.$inject=["$route","$rootScope","$routeParams","CirkelsessieService","ChatService","KaartService","DeelnameService","SpelkaartService"],e.module("kandoe").controller("CirkelsessieDetailsController",t)}(window.angular),function(e){"use strict";function t(e){var t=this;t.cirkelsessies=[],e.all().then(function(e){t.cirkelsessies=e}),t.addCirkelsessie=function(t){e.create(t).then(function(){})},t.showCirkelsessieLink=function(e){window.location.href="/#/cirkelsessies/details/"+e},t.deleteCirkelsessieLink=function(e){window.location.href="/#/cirkelsessies/delete/"+e}}t.$inject=["CirkelsessieService"],e.module("kandoe").controller("CirkelsessieIndexController",t)}(window.angular),function(e){"use strict";function t(e){var t=this;t.deelnames=[],e.getMijnDeelnames().then(function(e){t.deelnames=e})}t.$inject=["GebruikerService"],e.module("kandoe").controller("DeelnameIndexController",t)}(window.angular),function(e){"use strict";function t(){}e.module("kandoe").controller("HomeController",t)}(window.angular),function(e){"use strict";function t(e,t,n,r,i,o){var a=this;a.login=function(a){n.login(a).then(function(n){o.set("auth",{token:n.token}),r.find(i.decodeToken(n.token).sub).then(function(n){t.id=n.id,t.naam=n.gebruikersnaam,t.rollen=n.rollen,t.loggedIn=!0,e.path("/")})})}}t.$inject=["$location","$rootScope","AuthService","GebruikerService","JwtService","localStorageService"],e.module("kandoe").controller("LoginController",t)}(window.angular),function(e){"use strict";function t(e,t){var n=this;n.organisaties=[],t.myOrganisaties().then(function(e){n.organisaties=e}),n.addOrganisatie=function(n){t.create(n).then(function(){e.reload()})}}t.$inject=["$route","OrganisatieService"],e.module("kandoe").controller("OrganisatieIndexController",t)}(window.angular),function(e){"use strict";function t(e,t,n){var r=this;r.updateProfile=function(r){null==r.wachtwoord&&(r.wachtwoord=""),n.update(t.id,r).then(function(){n.find(t.id).then(function(n){console.log(r),console.log(n),t.id=n.id,t.naam=n.gebruikersnaam,t.rollen=n.rollen,e.path("/")})})}}t.$inject=["$location","$rootScope","GebruikerService"],e.module("kandoe").controller("ProfileController",t)}(window.angular),function(e){"use strict";function t(e,t){var n=this;n.register=function(n){t.register(n).then(function(){e.path("/auth/login")})}}t.$inject=["$location","AuthService"],e.module("kandoe").controller("RegisterController",t)}(window.angular);